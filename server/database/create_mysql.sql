-- Copyright (C) 2019-2024 Jan Frode Jæger <jan.frode.jaeger@ntnu.no>, NTNU, Trondheim, Norway
-- Copyright (C) 2019-2024 Bård Tesaker <bard.tesaker@ntnu.no>, NTNU, Trondheim, Norway
--
-- This file is part of AURORA, a system to store and manage science data.
--
-- AURORA is free software: you can redistribute it and/or modify it under 
-- the terms of the GNU General Public License as published by the Free 
-- Software Foundation, either version 3 of the License, or (at your option) 
-- any later version.
--
-- AURORA is distributed in the hope that it will be useful, but WITHOUT ANY 
-- WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS 
-- FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
--
-- You should have received a copy of the GNU General Public License along with 
-- AURORA. If not, see <https://www.gnu.org/licenses/>. 
--
-- MySQL dump 10.13  Distrib 5.7.33, for Linux (x86_64)
--
-- Host: localhost    Database: aurora
-- ------------------------------------------------------
-- Server version	5.7.33-0ubuntu0.16.04.1

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Temporary table structure for view `ANCESTORS`
--

DROP TABLE IF EXISTS `ANCESTORS`;
/*!50001 DROP VIEW IF EXISTS `ANCESTORS`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `ANCESTORS` AS SELECT 
 1 AS `entity`,
 1 AS `ancestor`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ANCESTORS_0`
--

DROP TABLE IF EXISTS `ANCESTORS_0`;
/*!50001 DROP VIEW IF EXISTS `ANCESTORS_0`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `ANCESTORS_0` AS SELECT 
 1 AS `entity`,
 1 AS `ancestor`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ANCESTORS_1`
--

DROP TABLE IF EXISTS `ANCESTORS_1`;
/*!50001 DROP VIEW IF EXISTS `ANCESTORS_1`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `ANCESTORS_1` AS SELECT 
 1 AS `entity`,
 1 AS `ancestor`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ANCESTORS_2`
--

DROP TABLE IF EXISTS `ANCESTORS_2`;
/*!50001 DROP VIEW IF EXISTS `ANCESTORS_2`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `ANCESTORS_2` AS SELECT 
 1 AS `entity`,
 1 AS `ancestor`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ANCESTORS_3`
--

DROP TABLE IF EXISTS `ANCESTORS_3`;
/*!50001 DROP VIEW IF EXISTS `ANCESTORS_3`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `ANCESTORS_3` AS SELECT 
 1 AS `entity`,
 1 AS `ancestor`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ANCESTORS_4`
--

DROP TABLE IF EXISTS `ANCESTORS_4`;
/*!50001 DROP VIEW IF EXISTS `ANCESTORS_4`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `ANCESTORS_4` AS SELECT 
 1 AS `entity`,
 1 AS `ancestor`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ANCESTORS_5`
--

DROP TABLE IF EXISTS `ANCESTORS_5`;
/*!50001 DROP VIEW IF EXISTS `ANCESTORS_5`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `ANCESTORS_5` AS SELECT 
 1 AS `entity`,
 1 AS `ancestor`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ANCESTORS_6`
--

DROP TABLE IF EXISTS `ANCESTORS_6`;
/*!50001 DROP VIEW IF EXISTS `ANCESTORS_6`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `ANCESTORS_6` AS SELECT 
 1 AS `entity`,
 1 AS `ancestor`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ANCESTORS_7`
--

DROP TABLE IF EXISTS `ANCESTORS_7`;
/*!50001 DROP VIEW IF EXISTS `ANCESTORS_7`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `ANCESTORS_7` AS SELECT 
 1 AS `entity`,
 1 AS `ancestor`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ANCESTORS_8`
--

DROP TABLE IF EXISTS `ANCESTORS_8`;
/*!50001 DROP VIEW IF EXISTS `ANCESTORS_8`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `ANCESTORS_8` AS SELECT 
 1 AS `entity`,
 1 AS `ancestor`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ANCESTORS_9`
--

DROP TABLE IF EXISTS `ANCESTORS_9`;
/*!50001 DROP VIEW IF EXISTS `ANCESTORS_9`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `ANCESTORS_9` AS SELECT 
 1 AS `entity`,
 1 AS `ancestor`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `DEPTH`
--

DROP TABLE IF EXISTS `DEPTH`;
/*!50001 DROP VIEW IF EXISTS `DEPTH`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `DEPTH` AS SELECT 
 1 AS `entity`,
 1 AS `depth`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Table structure for table `ENTITY`
--

DROP TABLE IF EXISTS `ENTITY`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ENTITY` (
  `entity` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `entityparent` bigint(20) unsigned NOT NULL,
  `entitytype` bigint(20) unsigned NOT NULL,
  PRIMARY KEY (`entity`)
) ENGINE=InnoDB AUTO_INCREMENT=2948 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ENTITYTYPE`
--

DROP TABLE IF EXISTS `ENTITYTYPE`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ENTITYTYPE` (
  `entitytype` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `entitytypename` varchar(255) NOT NULL,
  PRIMARY KEY (`entitytype`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ENTITY_SEQUENCE`
--

DROP TABLE IF EXISTS `ENTITY_SEQUENCE`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ENTITY_SEQUENCE` (
  `sequence` bigint(20) NOT NULL AUTO_INCREMENT,
  `entity` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`sequence`),
  KEY `entity` (`entity`)
) ENGINE=InnoDB AUTO_INCREMENT=1714 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;


--
-- Table structure for table `FI_DATASET`
--

DROP TABLE IF EXISTS `FI_DATASET`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `FI_DATASET` (
  `entity` bigint(20) NOT NULL,
  `store` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `perm` int(11) DEFAULT NULL,
  `cookie` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `timestamp` double DEFAULT NULL,
  PRIMARY KEY (`entity`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `FI_SUBJECT`
--

DROP TABLE IF EXISTS `FI_SUBJECT`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `FI_SUBJECT` (
  `subject` bigint(20) NOT NULL,
  `keycode` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `username` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `uid` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`subject`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `FI_GRANTED`
--

DROP TABLE IF EXISTS `FI_GRANTED`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `FI_GRANTED` (
  `subject` bigint(20) NOT NULL,
  `dataset` bigint(20) NOT NULL,
  `perm` int(11) DEFAULT NULL,
  PRIMARY KEY (`subject`,`dataset`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `FI_MODE`
--

DROP TABLE IF EXISTS `FI_MODE`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `FI_MODE` (
  `perm` int(11) NOT NULL,
  `mode` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`perm`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `FI_SCALE`
--

DROP TABLE IF EXISTS `FI_SCALE`;
/*!50001 DROP VIEW IF EXISTS `FI_SCALE`*/;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE VIEW `FI_SCALE` AS select `FI_DATASET`.`entity` AS `entity`,
concat(substr(((floor((`FI_DATASET`.`entity` / 1000000)) % 1000) + 1000),2,3),'/',substr(((floor((`FI_DATASET`.`entity` / 1000)) % 1000) + 1000),2,3)) AS `scale` from `FI_DATASET`;
SET character_set_client = @saved_cs_client;

--
-- Table structure for table `FI_PATH`
--

DROP TABLE IF EXISTS `FI_PATH`;
/*!50001 DROP VIEW IF EXISTS `FI_PATH`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `FI_PATH` AS SELECT 
  concat('fi-',`FI_DATASET`.`store`,'/rw/',`FI_SCALE`.`scale`) AS `rwscale`,
  concat('fi-',`FI_DATASET`.`store`,'/ro/',`FI_SCALE`.`scale`) AS `roscale`,
  concat('rm-',`FI_DATASET`.`store`,'/',`FI_SCALE`.`scale`) AS `rmscale`,
  concat('fi-',`FI_DATASET`.`store`,'/',`FI_MODE`.`mode`,'/',`FI_SCALE`.`scale`,'/',`FI_DATASET`.`entity`) AS `fipath`,
  concat('fi-',`FI_DATASET`.`store`,'/',`FI_MODE`.`mode`,'/',`FI_SCALE`.`scale`,'/',`FI_DATASET`.`entity`,'/',`FI_DATASET`.`cookie`) AS `fiprivate`,
  concat('rw-',`FI_DATASET`.`store`,'/',`FI_SCALE`.`scale`,'/',`FI_DATASET`.`entity`) AS `rwpath`,
  concat('ro-',`FI_DATASET`.`store`,'/',`FI_SCALE`.`scale`,'/',`FI_DATASET`.`entity`) AS `ropath`,
  concat('rm-',`FI_DATASET`.`store`,'/',`FI_SCALE`.`scale`,'/',`FI_DATASET`.`entity`) AS `rmpath`,
  concat(`FI_MODE`.`mode`,'-',`FI_DATASET`.`store`,'/',`FI_SCALE`.`scale`,'/',`FI_DATASET`.`entity`) AS `linkpath`,
  concat('view/',`FI_SCALE`.`scale`,'/',`FI_DATASET`.`entity`,'/',`FI_DATASET`.`cookie`) AS `privatepath`,
  concat('view/',`FI_SCALE`.`scale`,'/',`FI_DATASET`.`entity`,'/',`FI_DATASET`.`cookie`,'/data') AS `datapath`,
  `FI_DATASET`.`entity` AS `dataset` from ((`FI_DATASET` join `FI_SCALE` on((`FI_DATASET`.`entity` = `FI_SCALE`.`entity`))) join `FI_MODE` on((`FI_DATASET`.`perm` = `FI_MODE`.`perm`)));
/* SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `FI_INFO`
--

DROP TABLE IF EXISTS `FI_INFO`;
/*!50001 DROP VIEW IF EXISTS `FI_INFO`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `FI_INFO` AS SELECT 
`D`.`entity` AS `entity`,
`S`.`scale` AS `scale`,
`D`.`store` AS `store`,
`M`.`perm` AS `perm`,
`M`.`mode` AS `mode`,
`D`.`cookie` AS `cookie`,
`D`.`timestamp` AS `timestamp`,
concat('view/',`S`.`scale`,'/',`D`.`entity`) AS `datasetpath`,
concat('view/',`S`.`scale`) AS `viewscale`,
`P`.`rwscale` AS `rwscale`,
`P`.`roscale` AS `roscale`,
`P`.`rmscale` AS `rmscale`,
`P`.`fipath` AS `fipath`,
`P`.`fiprivate` AS `fiprivate`,
`P`.`rwpath` AS `rwpath`,
`P`.`ropath` AS `ropath`,
`P`.`rmpath` AS `rmpath`,
`P`.`linkpath` AS `linkpath`,
`P`.`privatepath` AS `privatepath`,
`P`.`datapath` AS `datapath`,
`P`.`dataset` AS `dataset` from (((`FI_DATASET` `D` join `FI_SCALE` `S` on((`S`.`entity` = `D`.`entity`))) left join `FI_MODE` `M` on((`M`.`perm` = `D`.`perm`))) left join `FI_PATH` `P` on((`P`.`dataset` = `D`.`entity`)));
/* SET character_set_client = @saved_cs_client; */

--
-- Table structure for table `LOG`
--

DROP TABLE IF EXISTS `LOG`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `LOG` (
  `logidx` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `logtime` double unsigned NOT NULL,
  `entity` bigint(20) unsigned NOT NULL,
  `loglevel` int(10) unsigned NOT NULL,
  `logtag` varchar(64) NOT NULL DEFAULT 'NONE',
  `logmess` varchar(1024) NOT NULL,
  PRIMARY KEY (`logidx`),
  KEY `logtime` (`logtime`)
) ENGINE=InnoDB AUTO_INCREMENT=17142 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `STATLOG`
--

DROP TABLE IF EXISTS `STATLOG`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `STATLOG` (
  `statlogid` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `timedate` bigint(20) unsigned NOT NULL,
  `client` varchar(128) NOT NULL,
  `clientver` varchar(128) NOT NULL,
  `useragent` varchar(128) NOT NULL,
  `ipaddr` varchar(64) NOT NULL,
  PRIMARY KEY (`statlogid`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

DROP TABLE IF EXISTS `USERLOG`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `USERLOG` (
    `userlogid` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
    `timedate` bigint(20) unsigned NOT NULL,
    `entity` bigint(20) unsigned NOT NULL,
    `tag` varchar(64) NOT NULL DEFAULT 'NONE',
    `message` varchar(1024) NOT NULL,
  PRIMARY KEY (`userlogid`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `LOGLEVEL`
--

DROP TABLE IF EXISTS `LOGLEVEL`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `LOGLEVEL` (
  `loglevel` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `loglevelname` varchar(50) NOT NULL,
  PRIMARY KEY (`loglevel`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `MEMBER`
--

DROP TABLE IF EXISTS `MEMBER`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `MEMBER` (
  `membersubject` bigint(20) unsigned NOT NULL,
  `memberobject` bigint(20) unsigned NOT NULL,
  PRIMARY KEY (`membersubject`,`memberobject`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `METADATA`
--

DROP TABLE IF EXISTS `METADATA`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `METADATA` (
  `entity` bigint(20) unsigned NOT NULL,
  `metadatakey` bigint(20) unsigned NOT NULL,
  `metadataidx` bigint(20) unsigned NOT NULL,
  `metadataval` varchar(1024) NOT NULL DEFAULT '',
  PRIMARY KEY (`entity`,`metadatakey`,`metadataidx`),
  KEY `metadataval` (`metadataval`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `METADATAKEY`
--

DROP TABLE IF EXISTS `METADATAKEY`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `METADATAKEY` (
  `metadatakey` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `metadatakeyname` varchar(1024) NOT NULL,
  PRIMARY KEY (`metadatakey`),
  KEY `metadatakeyname` (`metadatakeyname`)
) ENGINE=InnoDB AUTO_INCREMENT=161 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `METADATA_COMBINED`
--

DROP TABLE IF EXISTS `METADATA_COMBINED`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `METADATA_COMBINED` (
  `entity` bigint(20) unsigned NOT NULL,
  `metadatakey` bigint(20) unsigned NOT NULL,
  `metadataidx` bigint(20) unsigned NOT NULL,
  `metadataval` varchar(1024) NOT NULL DEFAULT '',
  PRIMARY KEY (`entity`,`metadatakey`,`metadataidx`),
  KEY `metadataval` (`metadataval`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `MTIME`
--

DROP TABLE IF EXISTS `MTIME`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `MTIME` (
  `table_name` varchar(255) NOT NULL,
  `mtime` double DEFAULT NULL,
  PRIMARY KEY (`table_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `PERM`
--

DROP TABLE IF EXISTS `PERM`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `PERM` (
  `permsubject` bigint(20) unsigned NOT NULL,
  `permobject` bigint(20) unsigned NOT NULL,
  `permgrant` blob NOT NULL DEFAULT '',
  `permdeny` blob NOT NULL DEFAULT '',
  PRIMARY KEY (`permsubject`,`permobject`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Temporary table structure for view `PERMISSIONS`
--

DROP TABLE IF EXISTS `PERMISSIONS`;
/*!50001 DROP VIEW IF EXISTS `PERMISSIONS`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `PERMISSIONS` AS SELECT 
 1 AS `permsubject`,
 1 AS `permobject`,
 1 AS `sequence`,
 1 AS `permgrant`,
 1 AS `permdeny`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Table structure for table `PERMTYPE`
--

DROP TABLE IF EXISTS `PERMTYPE`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `PERMTYPE` (
  `PERMTYPE` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `PERMNAME` varchar(255) NOT NULL,
  PRIMARY KEY (`PERMTYPE`)
) ENGINE=InnoDB AUTO_INCREMENT=55 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Temporary table structure for view `PERM_EFFECTIVE`
--

DROP TABLE IF EXISTS `PERM_EFFECTIVE`;
/*!50001 DROP VIEW IF EXISTS `PERM_EFFECTIVE`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
/*!50001 CREATE VIEW `PERM_EFFECTIVE` AS SELECT
 1 AS `permsubject`,
 1 AS `permobject`,
 1 AS `perm`*/;
/* SET character_set_client = @saved_cs_client; */

--
-- Table structure for table `PERM_EFFECTIVE_LUT`
--

DROP TABLE IF EXISTS `PERM_EFFECTIVE_LUT`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `PERM_EFFECTIVE_LUT` (
  `perms` blob NOT NULL,
  `perm` int(11) NOT NULL,
  PRIMARY KEY (`perms`(32),`perm`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `PERM_EFFECTIVE_PERMS`
--

DROP TABLE IF EXISTS `PERM_EFFECTIVE_PERMS`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `PERM_EFFECTIVE_PERMS` (
  `permsubject` int(11) NOT NULL,
  `permobject` int(11) NOT NULL,
  `perms` blob,
  PRIMARY KEY (`permsubject`,`permobject`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `FI_PERM`
--

DROP TABLE IF EXISTS `FI_PERM`;
/*!50001 DROP VIEW IF EXISTS `FI_PERM`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `FI_PERM` AS SELECT 
  `E`.`permsubject` AS `subject`,
  `E`.`permobject` AS `dataset`,
  `E`.`perm` AS `perm` from (`FI_DATASET` `D` join `PERM_EFFECTIVE` `E` on(((`E`.`permobject` = `D`.`entity`) and (`E`.`perm` = `D`.`perm`))));
/* SET character_set_client = @saved_cs_client; */

--
-- Table structure for table `FI_DENY`
--

DROP TABLE IF EXISTS `FI_DENY`;
/*!50001 DROP VIEW IF EXISTS `FI_DENY`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `FI_DENY` AS SELECT 
  `G`.`subject` AS `subject`,
  `G`.`dataset` AS `dataset`,
  `G`.`perm` AS `perm`,
  `S`.`keycode` AS `keycode`,
  `S`.`username` AS `username`,
  `S`.`uid` AS `uid`,`I`.`privatepath` AS `privatepath` from (((`FI_GRANTED` `G` left join `FI_PERM` `P` on(((`P`.`subject` = `G`.`subject`) and (`P`.`dataset` = `G`.`dataset`) and (`P`.`perm` = `G`.`perm`)))) 
    left join `FI_SUBJECT` `S` on((`S`.`subject` = `G`.`subject`))) 
    left join `FI_INFO` `I` on((`I`.`entity` = `G`.`dataset`))) where isnull(`P`.`perm`);
/* SET character_set_client = @saved_cs_client; */

--
-- Table structure for table `FI_GRANT`
--

DROP TABLE IF EXISTS `FI_GRANT`;
/*!50001 DROP VIEW IF EXISTS `FI_GRANT`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `FI_GRANT` AS SELECT 
  `P`.`subject` AS `subject`,
  `P`.`dataset` AS `dataset`,
  `P`.`perm` AS `perm`,
  `S`.`keycode` AS `keycode`,
  `S`.`username` AS `username`,
  `S`.`uid` AS `uid`,
  `I`.`privatepath` AS `privatepath` from (((`FI_PERM` `P` left join `FI_GRANTED` `G` on(((`G`.`subject` = `P`.`subject`) and (`G`.`dataset` = `P`.`dataset`) and (`G`.`perm` = `P`.`perm`)))) 
    left join `FI_SUBJECT` `S` on((`S`.`subject` = `P`.`subject`))) 
    left join `FI_INFO` `I` on((`I`.`entity` = `P`.`dataset`))) where isnull(`G`.`perm`);
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ROLES`
--

DROP TABLE IF EXISTS `ROLES`;
/*!50001 DROP VIEW IF EXISTS `ROLES`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `ROLES` AS SELECT 
 1 AS `entity`,
 1 AS `role`;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ROLES_0`
--

DROP TABLE IF EXISTS `ROLES_0`;
/*!50001 DROP VIEW IF EXISTS `ROLES_0`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `ROLES_0` AS SELECT 
 1 AS `entity`,
 1 AS `role`;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ROLES_1`
--

DROP TABLE IF EXISTS `ROLES_1`;
/*!50001 DROP VIEW IF EXISTS `ROLES_1`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `ROLES_1` AS SELECT 
 1 AS `entity`,
 1 AS `role`;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ROLES_2`
--

DROP TABLE IF EXISTS `ROLES_2`;
/*!50001 DROP VIEW IF EXISTS `ROLES_2`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `ROLES_2` AS SELECT 
 1 AS `entity`,
 1 AS `role`;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ROLES_3`
--

DROP TABLE IF EXISTS `ROLES_3`;
/*!50001 DROP VIEW IF EXISTS `ROLES_3`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `ROLES_3` AS SELECT 
 1 AS `entity`,
 1 AS `role`;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ROLES_4`
--

DROP TABLE IF EXISTS `ROLES_4`;
/*!50001 DROP VIEW IF EXISTS `ROLES_4`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `ROLES_4` AS SELECT 
 1 AS `entity`,
 1 AS `role`;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ROLES_5`
--

DROP TABLE IF EXISTS `ROLES_5`;
/*!50001 DROP VIEW IF EXISTS `ROLES_5`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `ROLES_5` AS SELECT 
 1 AS `entity`,
 1 AS `role`;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ROLES_6`
--

DROP TABLE IF EXISTS `ROLES_6`;
/*!50001 DROP VIEW IF EXISTS `ROLES_6`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `ROLES_6` AS SELECT 
 1 AS `entity`,
 1 AS `role`;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ROLES_7`
--

DROP TABLE IF EXISTS `ROLES_7`;
/*!50001 DROP VIEW IF EXISTS `ROLES_7`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `ROLES_7` AS SELECT 
 1 AS `entity`,
 1 AS `role`;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ROLES_8`
--

DROP TABLE IF EXISTS `ROLES_8`;
/*!50001 DROP VIEW IF EXISTS `ROLES_8`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `ROLES_8` AS SELECT 
 1 AS `entity`,
 1 AS `role`;
/* SET character_set_client = @saved_cs_client; */

--
-- Temporary table structure for view `ROLES_9`
--

DROP TABLE IF EXISTS `ROLES_9`;
/*!50001 DROP VIEW IF EXISTS `ROLES_9`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE VIEW `ROLES_9` AS SELECT 
 1 AS `entity`,
 1 AS `role`;
/* SET character_set_client = @saved_cs_client; */

--
-- Table structure for table `TMPLASSIGN`
--

DROP TABLE IF EXISTS `TMPLASSIGN`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `TMPLASSIGN` (
  `tmplassignentity` bigint(20) unsigned NOT NULL,
  `tmplassigntype` bigint(20) unsigned NOT NULL,
  `tmplassignno` bigint(20) unsigned NOT NULL,
  `tmpl` bigint(20) unsigned NOT NULL,
  PRIMARY KEY (`tmplassignentity`,`tmplassigntype`,`tmplassignno`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `TMPLCON`
--

DROP TABLE IF EXISTS `TMPLCON`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `TMPLCON` (
  `tmpl` bigint(20) unsigned NOT NULL,
  `tmplconkey` bigint(20) unsigned NOT NULL,
  `tmplconregex` varchar(255) DEFAULT '.*',
  `tmplconflags` blob DEFAULT NULL,
  `tmplconmin` bigint(20) unsigned DEFAULT '0',
  `tmplconmax` bigint(20) unsigned DEFAULT '1',
  `tmplconcom` varchar(255) DEFAULT '',
  PRIMARY KEY (`tmpl`,`tmplconkey`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `TMPLDEF`
--

DROP TABLE IF EXISTS `TMPLDEF`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `TMPLDEF` (
  `tmpl` bigint(20) unsigned NOT NULL,
  `tmplconkey` bigint(20) unsigned NOT NULL,
  `tmpldefno` bigint(20) unsigned NOT NULL,
  `tmpldef` varchar(1024) DEFAULT NULL,
  PRIMARY KEY (`tmpldefno`,`tmpl`,`tmplconkey`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `TMPLFLAG`
--

DROP TABLE IF EXISTS `TMPLFLAG`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `TMPLFLAG` (
  `tmplflag` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `tmplflagname` varchar(32) NOT NULL,
  PRIMARY KEY (`tmplflag`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Final view structure for view `ANCESTORS`
--

/*!50001 DROP VIEW IF EXISTS `ANCESTORS`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ANCESTORS` AS select `ANCESTORS_0`.`entity` AS `entity`,`ANCESTORS_0`.`ancestor` AS `ancestor` from `ANCESTORS_0` union select `ANCESTORS_1`.`entity` AS `entity`,`ANCESTORS_1`.`ancestor` AS `ancestor` from `ANCESTORS_1` union select `ANCESTORS_2`.`entity` AS `entity`,`ANCESTORS_2`.`ancestor` AS `ancestor` from `ANCESTORS_2` union select `ANCESTORS_3`.`entity` AS `entity`,`ANCESTORS_3`.`ancestor` AS `ancestor` from `ANCESTORS_3` union select `ANCESTORS_4`.`entity` AS `entity`,`ANCESTORS_4`.`ancestor` AS `ancestor` from `ANCESTORS_4` union select `ANCESTORS_5`.`entity` AS `entity`,`ANCESTORS_5`.`ancestor` AS `ancestor` from `ANCESTORS_5` union select `ANCESTORS_6`.`entity` AS `entity`,`ANCESTORS_6`.`ancestor` AS `ancestor` from `ANCESTORS_6` union select `ANCESTORS_7`.`entity` AS `entity`,`ANCESTORS_7`.`ancestor` AS `ancestor` from `ANCESTORS_7` union select `ANCESTORS_8`.`entity` AS `entity`,`ANCESTORS_8`.`ancestor` AS `ancestor` from `ANCESTORS_8` union select `ANCESTORS_9`.`entity` AS `entity`,`ANCESTORS_9`.`ancestor` AS `ancestor` from `ANCESTORS_9` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ANCESTORS_0`
--

/*!50001 DROP VIEW IF EXISTS `ANCESTORS_0`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ANCESTORS_0` AS select `ENTITY`.`entity` AS `entity`,`ENTITY`.`entity` AS `ancestor` from `ENTITY` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ANCESTORS_1`
--

/*!50001 DROP VIEW IF EXISTS `ANCESTORS_1`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ANCESTORS_1` AS select `a`.`entity` AS `entity`,`e`.`entityparent` AS `ancestor` from (`ANCESTORS_0` `a` join `ENTITY` `e` on((`a`.`ancestor` = `e`.`entity`))) where (`e`.`entity` <> `e`.`entityparent`) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ANCESTORS_2`
--

/*!50001 DROP VIEW IF EXISTS `ANCESTORS_2`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ANCESTORS_2` AS select `a`.`entity` AS `entity`,`e`.`entityparent` AS `ancestor` from (`ANCESTORS_1` `a` join `ENTITY` `e` on((`a`.`ancestor` = `e`.`entity`))) where (`e`.`entity` <> `e`.`entityparent`) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ANCESTORS_3`
--

/*!50001 DROP VIEW IF EXISTS `ANCESTORS_3`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ANCESTORS_3` AS select `a`.`entity` AS `entity`,`e`.`entityparent` AS `ancestor` from (`ANCESTORS_2` `a` join `ENTITY` `e` on((`a`.`ancestor` = `e`.`entity`))) where (`e`.`entity` <> `e`.`entityparent`) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ANCESTORS_4`
--

/*!50001 DROP VIEW IF EXISTS `ANCESTORS_4`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ANCESTORS_4` AS select `a`.`entity` AS `entity`,`e`.`entityparent` AS `ancestor` from (`ANCESTORS_3` `a` join `ENTITY` `e` on((`a`.`ancestor` = `e`.`entity`))) where (`e`.`entity` <> `e`.`entityparent`) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ANCESTORS_5`
--

/*!50001 DROP VIEW IF EXISTS `ANCESTORS_5`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ANCESTORS_5` AS select `a`.`entity` AS `entity`,`e`.`entityparent` AS `ancestor` from (`ANCESTORS_4` `a` join `ENTITY` `e` on((`a`.`ancestor` = `e`.`entity`))) where (`e`.`entity` <> `e`.`entityparent`) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ANCESTORS_6`
--

/*!50001 DROP VIEW IF EXISTS `ANCESTORS_6`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ANCESTORS_6` AS select `a`.`entity` AS `entity`,`e`.`entityparent` AS `ancestor` from (`ANCESTORS_5` `a` join `ENTITY` `e` on((`a`.`ancestor` = `e`.`entity`))) where (`e`.`entity` <> `e`.`entityparent`) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ANCESTORS_7`
--

/*!50001 DROP VIEW IF EXISTS `ANCESTORS_7`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ANCESTORS_7` AS select `a`.`entity` AS `entity`,`e`.`entityparent` AS `ancestor` from (`ANCESTORS_6` `a` join `ENTITY` `e` on((`a`.`ancestor` = `e`.`entity`))) where (`e`.`entity` <> `e`.`entityparent`) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ANCESTORS_8`
--

/*!50001 DROP VIEW IF EXISTS `ANCESTORS_8`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ANCESTORS_8` AS select `a`.`entity` AS `entity`,`e`.`entityparent` AS `ancestor` from (`ANCESTORS_7` `a` join `ENTITY` `e` on((`a`.`ancestor` = `e`.`entity`))) where (`e`.`entity` <> `e`.`entityparent`) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ANCESTORS_9`
--

/*!50001 DROP VIEW IF EXISTS `ANCESTORS_9`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ANCESTORS_9` AS select `a`.`entity` AS `entity`,`e`.`entityparent` AS `ancestor` from (`ANCESTORS_8` `a` join `ENTITY` `e` on((`a`.`ancestor` = `e`.`entity`))) where (`e`.`entity` <> `e`.`entityparent`) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `DEPTH`
--

/*!50001 DROP TABLE IF EXISTS `DEPTH`*/;
/*!50001 DROP VIEW IF EXISTS `DEPTH`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `DEPTH` AS select `ANCESTORS`.`entity` AS `entity`,count(`ANCESTORS`.`ancestor`) AS `depth` from `ANCESTORS` group by `ANCESTORS`.`entity` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `PERMISSIONS`
--

/*!50001 DROP VIEW IF EXISTS `PERMISSIONS`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `PERMISSIONS` AS select `r`.`entity` AS `permsubject`,`a`.`entity` AS `permobject`,`s`.`sequence` AS `sequence`,`p`.`permgrant` AS `permgrant`,`p`.`permdeny` AS `permdeny` from (((`PERM` `p` join `ENTITY_SEQUENCE` `s` on((`s`.`entity` = `p`.`permobject`))) join `ROLES` `r` on((`r`.`role` = `p`.`permsubject`))) join `ANCESTORS` `a` on((`a`.`ancestor` = `p`.`permobject`))) order by `s`.`sequence` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `PERM_EFFECTIVE`
--

/*!50001 DROP VIEW IF EXISTS `PERM_EFFECTIVE`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `PERM_EFFECTIVE` AS select `PERM_EFFECTIVE_PERMS`.`permsubject` AS `permsubject`,`PERM_EFFECTIVE_PERMS`.`permobject` AS `permobject`,`PERM_EFFECTIVE_LUT`.`perm` AS `perm` from (`PERM_EFFECTIVE_PERMS` join `PERM_EFFECTIVE_LUT` on((`PERM_EFFECTIVE_PERMS`.`perms` = `PERM_EFFECTIVE_LUT`.`perms`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ROLES`
--

/*!50001 DROP VIEW IF EXISTS `ROLES`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ROLES` AS select `ROLES_0`.`entity` AS `entity`,`ROLES_0`.`role` AS `role` from `ROLES_0` union select `ROLES_1`.`entity` AS `entity`,`ROLES_1`.`role` AS `role` from `ROLES_1` union select `ROLES_2`.`entity` AS `entity`,`ROLES_2`.`role` AS `role` from `ROLES_2` union select `ROLES_3`.`entity` AS `entity`,`ROLES_3`.`role` AS `role` from `ROLES_3` union select `ROLES_4`.`entity` AS `entity`,`ROLES_4`.`role` AS `role` from `ROLES_4` union select `ROLES_5`.`entity` AS `entity`,`ROLES_5`.`role` AS `role` from `ROLES_5` union select `ROLES_6`.`entity` AS `entity`,`ROLES_6`.`role` AS `role` from `ROLES_6` union select `ROLES_7`.`entity` AS `entity`,`ROLES_7`.`role` AS `role` from `ROLES_7` union select `ROLES_8`.`entity` AS `entity`,`ROLES_8`.`role` AS `role` from `ROLES_8` union select `ROLES_9`.`entity` AS `entity`,`ROLES_9`.`role` AS `role` from `ROLES_9` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ROLES_0`
--

/*!50001 DROP VIEW IF EXISTS `ROLES_0`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ROLES_0` AS select `ANCESTORS`.`entity` AS `entity`,`ANCESTORS`.`ancestor` AS `role` from `ANCESTORS` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ROLES_1`
--

/*!50001 DROP VIEW IF EXISTS `ROLES_1`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ROLES_1` AS select `r`.`entity` AS `entity`,`m`.`memberobject` AS `role` from (`ROLES_0` `r` join `MEMBER` `m` on((`m`.`membersubject` = `r`.`role`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ROLES_2`
--

/*!50001 DROP VIEW IF EXISTS `ROLES_2`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ROLES_2` AS select `r`.`entity` AS `entity`,`m`.`memberobject` AS `role` from (`ROLES_1` `r` join `MEMBER` `m` on((`m`.`membersubject` = `r`.`role`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ROLES_3`
--

/*!50001 DROP VIEW IF EXISTS `ROLES_3`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ROLES_3` AS select `r`.`entity` AS `entity`,`m`.`memberobject` AS `role` from (`ROLES_2` `r` join `MEMBER` `m` on((`m`.`membersubject` = `r`.`role`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ROLES_4`
--

/*!50001 DROP VIEW IF EXISTS `ROLES_4`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ROLES_4` AS select `r`.`entity` AS `entity`,`m`.`memberobject` AS `role` from (`ROLES_3` `r` join `MEMBER` `m` on((`m`.`membersubject` = `r`.`role`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ROLES_5`
--

/*!50001 DROP VIEW IF EXISTS `ROLES_5`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ROLES_5` AS select `r`.`entity` AS `entity`,`m`.`memberobject` AS `role` from (`ROLES_4` `r` join `MEMBER` `m` on((`m`.`membersubject` = `r`.`role`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ROLES_6`
--

/*!50001 DROP VIEW IF EXISTS `ROLES_6`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ROLES_6` AS select `r`.`entity` AS `entity`,`m`.`memberobject` AS `role` from (`ROLES_5` `r` join `MEMBER` `m` on((`m`.`membersubject` = `r`.`role`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ROLES_7`
--

/*!50001 DROP VIEW IF EXISTS `ROLES_7`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ROLES_7` AS select `r`.`entity` AS `entity`,`m`.`memberobject` AS `role` from (`ROLES_6` `r` join `MEMBER` `m` on((`m`.`membersubject` = `r`.`role`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ROLES_8`
--

/*!50001 DROP VIEW IF EXISTS `ROLES_8`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ROLES_8` AS select `r`.`entity` AS `entity`,`m`.`memberobject` AS `role` from (`ROLES_7` `r` join `MEMBER` `m` on((`m`.`membersubject` = `r`.`role`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `ROLES_9`
--

/*!50001 DROP VIEW IF EXISTS `ROLES_9`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `ROLES_9` AS select `r`.`entity` AS `entity`,`m`.`memberobject` AS `role` from (`ROLES_8` `r` join `MEMBER` `m` on((`m`.`membersubject` = `r`.`role`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2021-05-18 17:05:59
